This is a [Next.js](https://nextjs.org/) project bootstrapped with [`create-next-app`](https://github.com/vercel/next.js/tree/canary/packages/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev

Rich menu created with ID: richmenu-7f6cc44cf3643bec7374eaeb449c6c71
Rich menu image uploaded successfully {}
Register rich menu successfully created and image uploaded with ID: richmenu-7f6cc44cf3643bec7374eaeb449c6c71
Rich menu created with ID: richmenu-741553f870a405009fec483601830523
Rich menu image uploaded successfully {}
General user rich menu successfully created and image uploaded with ID: richmenu-741553f870a405009fec483601830523
Rich menu created with ID: richmenu-2fc50f25f3582448a3f53be2822cc66b
Rich menu image uploaded successfully {}
Special user rich menu successfully created and image uploaded with ID: richmenu-2fc50f25f3582448a3f53be2822cc66b
Rich menu created with ID: richmenu-deec36bf2265338a9f48acd024ce1cde
Rich menu image uploaded successfully {}
Admin rich menu successfully created and image uploaded with ID: richmenu-deec36bf2265338a9f48acd024ce1cde
Rich menu created with ID: richmenu-0ea158465f8926515b7d159f18bfb6d6
Rich menu image uploaded successfully {}
Super Admin rich menu successfully created and image uploaded with ID: richmenu-0ea158465f8926515b7d159f18bfb6d6
```

flex message for leave request JSON
{
"type": "bubble",
"size": "giga",
"header": {
"type": "box",
"layout": "vertical",
"contents": [
{
"type": "box",
"layout": "vertical",
"contents": [
{
"type": "text",
"text": "Leave Request ",
"color": "#FFFFFF",
"align": "start",
"size": "xl",
"weight": "bold"
}
]
},
{
"type": "box",
"layout": "vertical",
"contents": [],
"backgroundColor": "#01AF70"
}
],
"backgroundColor": "#01AF70"
},
"hero": {
"type": "box",
"layout": "vertical",
"contents": [],
"margin": "none",
"spacing": "none",
"cornerRadius": "none",
"justifyContent": "space-around",
"offsetTop": "none",
"offsetBottom": "none",
"alignItems": "center",
"backgroundColor": "#01AF70"
},
"body": {
"type": "box",
"layout": "vertical",
"contents": [
{
"type": "box",
"layout": "horizontal",
"contents": [
{
"type": "box",
"layout": "vertical",
"contents": [],
"flex": 1
}
]
},
{
"type": "box",
"layout": "horizontal",
"contents": [
{
"type": "box",
"layout": "vertical",
"contents": [
{
"type": "image",
"url": "https://developers-resource.landpress.line.me/fx/clip/clip13.jpg",
"aspectMode": "cover",
"size": "full"
}
],
"cornerRadius": "100px",
"width": "72px",
"height": "72px"
},
{
"type": "box",
"layout": "vertical",
"contents": [
{
"type": "text",
"contents": [
{
"type": "span",
"text": "ชื่อ-สกุล",
"weight": "bold",
"color": "#000000"
},
{
"type": "span",
"text": " "
},
{
"type": "span",
"text": "ปรัญพัชร์ พรรธน์ไชยากร (กิ๊ฟ)"
}
],
"size": "sm",
"wrap": true,
"text": "name of a person you sent request"
},
{
"type": "text",
"contents": [
{
"type": "span",
"text": "ประเภทการลา",
"weight": "bold",
"color": "#000000"
},
{
"type": "span",
"text": " "
},
{
"type": "span",
"text": "ลากิจ / ลาครึ่งวันช่วงเช้า"
}
],
"size": "sm",
"wrap": true,
"text": "Leave type"
},
{
"type": "text",
"contents": [
{
"type": "span",
"text": "วันที่",
"weight": "bold",
"color": "#000000"
},
{
"type": "span",
"text": " "
},
{
"type": "span",
"text": "31 พ.ค. 67 - 31 พ.ค. 67"
}
],
"size": "sm",
"wrap": true,
"text": "date start - end "
},
{
"type": "text",
"contents": [
{
"type": "span",
"text": "สาเหตุ",
"weight": "bold",
"color": "#000000"
},
{
"type": "span",
"text": " "
},
{
"type": "span",
"text": "ไปช่วยงานข้างนอก"
}
],
"size": "sm",
"wrap": true,
"text": "reason"
},
{
"type": "box",
"layout": "baseline",
"contents": [
{
"type": "text",
"text": "วันที่ยื่น 15 มิ.ย. 2567",
"size": "sm",
"color": "#bcbcbc"
}
],
"spacing": "sm",
"margin": "md"
}
]
}
],
"spacing": "xl",
"paddingAll": "20px"
}
],
"paddingAll": "0px"
},
"footer": {
"type": "box",
"layout": "horizontal",
"contents": [
{
"type": "button",
"action": {
"type": "uri",
"label": "อนุมัติ",
"uri": "http://linecorp.com/"
},
"color": "#4C72F1",
"style": "primary",
"scaling": true
},
{
"type": "button",
"action": {
"type": "uri",
"label": "ไม่อนุมัติ",
"uri": "http://linecorp.com/"
},
"color": "#DEEDFF",
"style": "secondary",
"scaling": true,
"margin": "lg"
}
]
},
"styles": {
"hero": {
"backgroundColor": "#FFFFFF"
}
}
}

#004dff Magic ink
#ff1900 Carolina reaper
#00ff7f Spring green

{
"type": "bubble",
"header": {
"type": "box",
"layout": "vertical",
"contents": [
{
"type": "text",
"text": "Leave Request is Approved",
"size": "md",
"weight": "bold",
"color": "#FFFFFF"
}
],
"backgroundColor": "#00964a"
},
"body": {
"type": "box",
"layout": "vertical",
"contents": [
{
"type": "box",
"layout": "horizontal",
"contents": [
{
"type": "box",
"layout": "vertical",
"contents": [],
"flex": 1,
"cornerRadius": "100px",
"width": "72px",
"height": "72px"
}
]
},
{
"type": "box",
"layout": "horizontal",
"contents": [
{
"type": "box",
"layout": "vertical",
"contents": [],
"borderWidth": "2px",
"borderColor": "#000000",
"height": "120px",
"width": "60px"
},
{
"type": "box",
"layout": "vertical",
"contents": []
}
],
"alignItems": "center",
"height": "100px"
},
{
"type": "box",
"layout": "horizontal",
"contents": [
{
"type": "box",
"layout": "vertical",
"contents": [
{
"type": "image",
"url": "https://developers-resource.landpress.line.me/fx/clip/clip13.jpg",
"aspectMode": "cover",
"size": "full"
}
],
"cornerRadius": "100px",
"width": "72px",
"height": "72px"
},
{
"type": "box",
"layout": "vertical",
"contents": [
{
"type": "text",
"contents": [
{
"type": "span",
"text": "brown_05",
"weight": "bold",
"color": "#000000"
},
{
"type": "span",
"text": " "
},
{
"type": "span",
"text": "I went to the Brown&Cony cafe in Tokyo and took a picture"
}
],
"size": "sm",
"wrap": true
},
{
"type": "box",
"layout": "baseline",
"contents": [
{
"type": "text",
"text": "1,140,753 Like",
"size": "sm",
"color": "#bcbcbc"
}
],
"spacing": "sm",
"margin": "md"
}
]
}
],
"spacing": "xl",
"paddingAll": "20px"
}
],
"paddingAll": "0px"
}
}

{
"type": "box",
"layout": "horizontal",
"contents": [
{
"type": "box",
"layout": "baseline",
"contents": [
{
"type": "filler"
}
],
"flex": 1
},
{
"type": "box",
"layout": "vertical",
"contents": [
{
"type": "box",
"layout": "horizontal",
"contents": [
{
"type": "filler"
},
{
"type": "box",
"layout": "vertical",
"contents": [],
"width": "2px",
"backgroundColor": "#B7B7B7"
},
{
"type": "filler"
}
],
"flex": 1
}
],
"width": "12px"
},

"path": "/api/cron/sync-attendance",
"schedule": "_/15 _ \* \* \*"

const checkInOut = useCallback(async () => {
if (isSubmittingRef.current) return;
isSubmittingRef.current = true;
setIsLoading(true);

    try {
      await fetchCheckInOutAllowance();

      if (!checkInOutAllowance?.allowed) {
        throw new Error('Check-in/out not allowed');
      }

      const response = await axios.post('/api/check-in-out', {
        employeeId: userData.employeeId,
        lat: location?.lat,
        lng: location?.lng,
      });

      setAttendanceStatus(prevStatus => ({
        ...prevStatus,
        isCheckingIn: !prevStatus.isCheckingIn,
        // Update other fields as necessary based on the response
      }));

      // Refresh the check-in/out allowance after successful check-in/out
      await fetchCheckInOutAllowance();

    } catch (error) {
      console.error('Error during check-in/out:', error);
      // Handle error (e.g., show an error message to the user)
    } finally {
      isSubmittingRef.current = false;
      setIsLoading(false);
    }

}, [userData.employeeId, location, checkInOutAllowance, fetchCheckInOutAllowance]);

const refreshAttendanceStatus = useCallback(async () => {
setIsLoading(true);
try {
const response = await axios.get('/api/user-check-in-status', {
params: { employeeId: userData.employeeId },
});
setAttendanceStatus(response.data);
return response.data;
} catch (error) {
console.error('Error refreshing attendance status:', error);
// Handle error
} finally {
setIsLoading(false);
}
}, [userData.employeeId]);
